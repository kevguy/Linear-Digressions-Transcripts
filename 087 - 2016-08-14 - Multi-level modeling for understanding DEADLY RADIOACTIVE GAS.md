| Person | Transcripts |
| :-- | :-- |
| Ben: | Hey Katie. |
| Katie: | Hi Ben. |
| Ben: | Today, we're going to talk about modeling, but the geeky kind of modeling. |
| Katie: | Not like America's Next Top Model. |
| Ben: | Oh, wow, what if there was a television show about... about the modeling that we’re gonna talk about. |
| Katie: | Oh, that is a million dollar idea Ben. |
| Ben: | I don’t think it’s a million dollar idea. I don’t think there’d be that many people to watch. |
| Katie: | You need to think bigger. |
| Ben: | I would. You are listening to Linear Digressions. |
| Katie: | So what kind of modeling are we actually talking about? |
| Ben: | So I wanted to talk about multi-level or sometimes you hear it called the hierarchical modeling. This is something that I mentioned sort of parenthetically in one of our episodes about the elections and how you do poll aggregation and things like that. I think I said something like ‘Yeah, if you have some data and got some structure or some correlations, then sometimes you want to throw it into a multi-level model, and back and kind of deal with it’, and then we moved on. But it's much more interesting and much more complicated than that, so I wanted to unpack that statement, so the context in which that I was thinking about when I said that, is the idea that let’s say you have a bunch of data, and it's kind of sitting there in a CSV file on your computer or something like that, and you want to run some sort of regression or classification on it, and but not all data points in in your data set had been created equally. In fact, you think that there's kind of little groups within your data, and that you could have important variation across the different groups, so one simple example is let’s suppose you have a bunch of standardized testing data from students who were in high school, and you want to have some sort of model of how well students are doing on their standardized tests, and on the one hand you can say ‘Well, all students are roughly the same and we can use things like predictors like maybe their GPA, and their associated economic background, and what classes they took in the past, we put those all into our regression and it spits out some kind of prediction about their test performance. |
| Katie: | Right, so basically treating all of these students as individuals, and we're looking at data points that we have about them specifically in kind of a uniform way. |
| Ben: | Yeah, I mean what we're saying is that we were drawing them all from the same distribution and that any student is kind of comparable in all ways to any other student. But... |
| Katie: | You said something about grouping though. |
| Ben: | Right, so if you’ve ever been in high school, you know that high school isn't a case where all students are exactly the same, they’re organized into classes, and they might be sort of randomly sorted into classes, and there might not be any reason why you get Mr. Slagel(?) vs Mr. Brookeheadstrum(?) if... |
| Katie: | Are those real teacher names? |
| Ben: | Yeah, they are my high school science teachers. And they’re both actually really good, so this is not a great example, but let’s suppose one of them was very good and one of them was not so good. |
| Katie: | Right, oh... I see what you’re saying. |
| Ben: | And so then, right, your students are going to show sort of some fundamentally different patterns based on who has which teacher, the students with the good teacher are going to be showing that they have better test performance as a result of that, and so we would say they're sort of like a classroom or teacher level effect that is going to provide some structure in the data and we want to have a model that is capable of capturing that. |
| Katie: | That’s interesting, okay, so it's a common thread that although it may have been randomly assigned initially, you actually have a causation, a causal effect going on, because of some external factor in this case, whether their teacher was really good or really bad. |
| Ben: | Sure, or it doesn't even have to necessarily be causal… |
| Katie: | Oh really? |
| Ben: | Cause causality really can be tricky, but you just have to show that there's a correlation in there , and that having some kind of structure in the model of it that reflects that... that correlation can give you a model that in general is more powerful than... than if you were to not take that information into account. |
| Katie: | So what would be an example of that be like the kids in the chess club perform differently than kids were not in the chess club, for example, and it's not... it's not anything about the chess club that's doing anything to their test scores but it's that they tend to... maybe they tend to congregate or join the same groups, because of something else about them, that's a common thread. |
| Ben: | Oh, yeah, so that is not the first thing that I would think of something like the chess club because students can self-select into the chess club. So usually you do want them to be sort of randomly sorted into any of these classes. For example, it would probably by and large mess up your regression if one of the teachers is teaching an honors class and therefore gets all the smart students, but yes, so let me give another example of this is how this actually becomes relevant for something like an election prediction. So there's a bunch of really good resources, a lot of the best riding on this is done by a professor in Columbia named Andrew Gelman and he's written a couple books and he has an excellent blog that I read a lot, and he's done this... this example about running regression for radon levels, when you’re testing for radon in people's houses. |
| Katie: | Radon like… how does radon end up in people's houses? Is that a thing? |
| Ben: | Right, yeah, so radon is a gas... it's a noble gas… it’s radioactive and so it's pretty nasty, you don't really want to breathe it if possible, and it's in fact of the lung cancer cases that are not caused by smoking, it’s… I think the number one cause, and unfortunately it is one of the by-products of just kind of ambien radioactive material in the ground decaying, and so if you have a basement in your house, then that's a part of your house is closer to the ground, and so you tend to have sometimes more of a radon problem in houses with basements. |
| Katie: | I had no idea. |
| Ben: | Yeah. |
| Katie: | So that's not a hauan-cause problem other than that we're digging into the ground? |
| Ben: | Right, yeah, yeah, I think that's generally right. So the radon levels that you're measuring in a house and to over-simplify the problem a little bit... are going to be a function of of two different factors. There's going to be the 1/0 of whether your house has a basement, because houses with basements... you're going to be making the radon measurements at the lowest point of the house, so for houses with basement that’s going to be in the basement, and then for houses without them it'll be on the first floor. |
| Katie: | And when you say 1/0 that says like a Boolean, and it's either you have a basement or you don't have a basement? You never have half a basement? |
| Ben: | Right, right, and then there's going to be a second variable that takes into account the fact that... so I said that radon comes from decaying radioactive elements in the ground, and so depending on the exact geology of where it is that you live, this can be more or less of a factor, so for people who live in certain areas depending on the composition of the dirt, literally where they live, then radon might be more or less of a problem. So there's also this kind of geographical effect to whether radon is going to be a big problem for you. And so basically the idea was they did a big radon study, and they wanted to understand for a given person or given household, can we make a prediction of how big of a problem with radon would be for this household based on its geography and whether there’s a basement or not. And so the dataset that they collected for this is they had measurements for... I don't remember the exact numbers, but let's say like several hundred, maybe a couple thousand different houses, that were all across the United States, and so they're going to be geographically distributed, even though you have a few thousand measurements, it's going to be not particularly common for you to have more than 5… 10… 20 maybe different measurements that are happening in the same county, see all these... you've all these measurements, they're organized by which county they fall into and whether they have a basement in them or not. And the prediction that you make about whether someone is going to have a radon problem or not is going to be... so you can think of it in a couple different ways, one is you can just take everyone in the United States and you pull them all together, and you run regression over all of that data at the same time, and you say kind of like ‘Well, we have an average radon level for the entire United States, and maybe it's higher for people who have basements by some quantifiable amount, and that's all we can tell you.’ |
| Katie: | Yeah, that seems like… I mean, so I don't really know what you're going to tell me, so that's pretty much what I would say, it's like ‘okay you can... you can kind of look at this data, and you can figure out, okay, basements mean more of a radon problem.’ |
| Ben: | Right, so but let's think about like a specific case then. So let’s suppose I don't know if this is true if you live in California, so let’s say that like California because of the geology has lots of radon, and so then if I'm trying to say what's the probability that Ben has a problem as a radon problem in California, then what you're going to be more interested in is not necessarily what is the chance that you have a radon problem for anywhere in the United States, but it's going to be what is the probability of a radon problem given the fact that we have a number of data points that are taken from relatively near by where you are, and those particular data points seem to be saying that ‘No, there's like in the particular county that you live in, it seems like the radon rates are higher regardless of whether you have a basement or not, there's just more radon that's possible for you to be having a problem with.’ If you were to look at sort of the data that is more local to you, then that would give you a different answer, than if you were to pull everything together. |
| Katie: | I see, so I look at my data that's local, and I see... I can... I can figure out like ‘Okay, I don't have a basement because I live in California, there are not many basements in California, but I still might have a radon problem’, whereas if I look at all of America, I see ‘Okay, basements are more of an issue and I don't have a basement therefore I am more... I’m more likely to be okay.’ |
| Ben: | Right, so you have a little bit of this, but so... so the best model would be the one that has lots of measurements that are taken, and all of them are close to you. So if all of your neighbors have had radon measurements done, then that's the best-case scenario because they're all very close to you and you don't have this kind of smearing out over the entire country, but you also have a lot of them, and so you can say with high confidence or high statistical significance that there's something that's going on. And so one of the challenges is with this particular radon example though is that in any given geographical location, you might only have a handful of points that were taken, and so you have a little bit of a trade-off where those points are going to be for more relevant to the measurement that you're trying to make, so that's good, but there's only a few of them and so you're more prone to statistical fluctuations, and that’s bad. And so, is there some way that we can negotiate sort of those two problems to get something that is maybe better than either one of those scenarios by itself. This is what a hierarchical or a multi-level model set you up to do as it says that there's what we would call county-level effects and there's a particular way that we can take those into account or fitting the model. One thing I should add hypothetically is that I'm calling these hierarchical and multi-level models kind of interchangeably and I think Andrew Gelman will slightly take issue with that, maybe he has a little bit of a more refined definition of that, but a lot of places and a lot of other sources, that I seen him sort of using them interchangeably, so I'm gonna use some interchangeably and not belabor that particular detail, but anyway... so here's the way that you could structure your model. When you set up your model, you're going to have two variables, it is going to be what county are we trying to make a measurement for, and does this house have a basement or not. And so for each county and imagine that you have your data for like a given county, and let's say you have twenty measurements that were taken there, and ten of them were taken with basements and ten of them were taken without basements, so you can… |
| Katie: | Okay, make it even. |
| Ben: | Yeah, the x-axis is capturing whether it has a basement or not, so there should be ten points set to zero cause they don't have a basement, and you have ten more at one, because they do have a basement. And the thing that you’re drawing is kind of a line... a regression line that connects those two groups of points, so if the points that are associated with having a basement in general are going to have higher radon levels, that group of points is going to be closed higher up, and so there's going to be sort of this upward going diagonal line between the low group that don't have a basement and the high group that does have a basement, does this make sense so far? |
| Katie: | Yeah, so you’ve got a line that's basically going up and to the right? |
| Ben: | Right. |
| Katie: | To indicate that the more ‘basementier’… your house is, the more likely you are to have a radon issue. |
| Ben: | Right, or in other words, you can say that like, the fact that you have a basement raises the prediction of the radon levels by some set amount and that set amount is determined by the slope of the line. |
| Katie: | Alright, so this is a graph for one county, right? |
| Ben: | For one county, that's right. |
| Katie: | Okay. |
| Ben: | So now imagine we have 80 different counties, and so each of them is going to have their own little scatter plot picture, where you have a bunch of points low at zero and then you have some more points that are presumably little bit higher at one, and you're drawing all these different diagonal lines. |
| Katie: | So 80 graphs, all with their own little diagonal lines, which are indicating how much basements tend to affect things? |
| Ben: | Right, so what a multi-level model is going to do then, or what would be like a sensible thing to do is you say... ‘Okay, the fact that you have a basement, like basements let’s say they are roughly the same across all different counties in the United States. For example, we don’t think that a basement in California has any more or less impact on the amount of radon that you have than a basement in Chicago. And so what that means is that the difference in radon levels that you predict between no basement and has a basement, that difference is going to be the same for all the different counties and what that means is the slopes of all of these lines are going to be the same across all of the counties.’ |
| Katie: | So, let me take a guess here. So you've got a bunch of counties which have let's say 50% basement, 50% not basement, so you would get a really clear idea of what that slope of that line would be, and assuming for a second that... that slope is going to be the same no matter where in the country you are, you can go to California, and you can say ‘Alright, I have mostly data points with no basement, I don't really have any data points with a basement, but I can infer based on the slope of the line in other places in the country that if I had a basement, this is where I would end up’ |
| Ben: | Yeah, yeah, so you can start to do measurements like that, which wouldn't really be possible if you weren't doing something like this, right? |
| Katie: | Yeah, it's kind of a smart way of reconciling how ‘basementiness’ affects things, and how geography affects things and kind of bringing your... like with very few data points in every county, bringing kind of the strength of all of your data points of the country, to each of the counties in a way. |
| Ben: | Yeah, yeah and so then the statistical noise that you might get and even in county gets smoothed over a little bit by the fact that you have information from all these other counties, they can help you understand what the difference is, in basements in that county. And the thing that it also has you do is that even though the slopes are all tied together, now the intercepts are allowed to vary somewhat more, and so the intercept is where we say something like ‘Okay, California just has an inherently high radon right? Because of the geology, and so your intercept is going to be very high you start out and when you're in California, you just start out at a higher probability of radon than you do in Chicago. So Chicago might have a lower intercept’. |
| Katie: | And by intercept you mean where this line is or where the point on this line is when x equals zero? |
| Ben: | Yeah, what's the y value when x equals zero. That’s right. |
| Katie: | In other words, how bad are things when you don't have a basement. |
| Ben: | Sure, yeah, and then the last piece of this that I wanted to add is what makes this a hierarchical model, is you make an assumption about the distribution that you have to those intercepts. And so you might say something like ‘Well, I think that the geology that governs the radon rates is maybe Gaussian distributed, so it was kind of a bell curve, so most of the counties are kind of in the middle, and then you might have a few extreme counties on either end that have geography that’s particularly prone to high radon rates or very prone to not having any radon at all, and those are starting to get out towards the tails. The thing that… Gaussian Distribution does is that then when you're fitting all of these lines at the same time, any given one of them is allowed to wander into like very high rate on territory, or very low rate on territory, if there's a very compelling evidence, there is very strong data in that... in that county and that... that something like that was going on, but if you're interested where it might be a county this kind of rural, not a lot of people live there, you only have a few data points, then what it’s going to do is it's going to easily pull that intercept closer to the average intercept over the entire country. And so, even if you end up in a place where you have a statistical fluctuation, you only have a few data points, and because of that you end up a little bit getting kind of more of an extreme sample than... than you actually have, the fact that there's all these other counties that are available to sort of inform you about what may be a good baseline guess for this county is, means that it is going to pull that county a little bit closer to to the group as a whole and it won't wander as far away from from the general population. And so that's the way it was something like this can kind of smooth over, one of these they said was that the models can smooth over some of the noise, when you have some of the small subgroups, and you need to estimate their effects, and so you use sort of the other subgroups to inform what would be a more reasonable guess for any given some group, even if you see something kind of extreme, you can use the other subgroups to infer whether it might be something that’s little bit more, you know, in the middle of the pack. |
| Katie: | We've been talking about radon rates in California for a little while, and so I just looked it up. Turns out California actually isn't all that bad. North Dakota apparently has a lot of radon, so if you're in North Dakota… |
| Ben: | Stay out of your basement. |
| Katie: | Stay out of your basement. |
| Ben: | Anyway, didn't you say this had to do something to do with elections or something? |
| Katie: | Right, yeah, so radon is the example that Gelman uses, but the thing that's nice about this radon example is it actually translates very directly into the kinds of analytics that they run for polling aggregation. |
| Ben: | Oh, that's a place where you have relatively few data points per county or per state, and you have a couple different things which are kind of disconnected, and so you can use this type of a method to... I guess, to do it a similar kind of thing. |
| Katie: | Yeah, so here’s the analogy. Let's say I want to put out a poll, it's 3000 people, it's going to be a nationwide poll, and so those 3000 people are going to be distributed over the 50 different states, and so in every state, you might only have a few tens of people that you're polling. So you're very susceptible to noise in any given state, and so let's imagine then that you have state-level effects, that you have certain states that you think you're always going to go more for Democrat and states that are always going to go for Republican, whatever. So the state level effects now are like sort of the analog of do you live in a county that has a high propensity for radon or not. To understand that, just like each of their states is where they are, and then let's say taking a sample from president election right now, so Donald Trump not doing particularly well with women in particular, there's a big gap, and so you can say that for each one of these states, we have kind of this base line rate of the support for Donald Trump right now, relative to Hillary Clinton, but we think there's also a significant effect for whether we’re polling for women or for men, and then in particular, there's going to be this big offset where even if I'm in a state that... let’s say is a big tendency to go very Republican, that if I'm thinking about whether women want Donald Trump or not, there's going to be a big offset says that you know, they don't like him as much. |
| Ben: | Mm hmm. |
| Katie: | And so, the women versus men is the analog of do you have a basement or not. So it's just the sort of binary thing they can go in, and adjust all of these estimates on a state-by-state basis, so that then you have much more tuned regression for each one of your states based on whether you know which state it is, and whether this is a man or woman, even if you don't have a lot of specific data points for any given state, like oh, here’s some men that I talked to in this state, and I have a really statistically well-supported idea of which way the election is going, I can still infer that from sort of all the other men that I've talked to, and all the people that I've talked to you in that state, and I can still make a guess that in general is going to be a lot closer than that I didn't include that information. |
| Ben: | So whether it's Donald Trump or radon, multi-level modeling can help us.
